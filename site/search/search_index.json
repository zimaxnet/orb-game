{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\ud83c\udfae Orb Game Documentation","text":"<p>Welcome to the official documentation for Orb Game - an advanced AI-powered interactive gaming platform that focuses exclusively on discovering the most influential historical figures across different categories and epochs.</p>"},{"location":"#documentation-structure","title":"\ud83d\udcda Documentation Structure","text":""},{"location":"#getting-started","title":"\ud83c\udfaf Getting Started","text":"<ul> <li>Introduction to Orb Game</li> <li>Quick Start Guide</li> <li>Installation &amp; Setup</li> </ul>"},{"location":"#gameplay-guide","title":"\ud83c\udfae Gameplay Guide","text":"<ul> <li>How to Play</li> <li>Categories &amp; Epochs</li> <li>Historical Figures</li> <li>Audio &amp; Accessibility</li> <li>\ud83d\uddbc\ufe0f Image Display System</li> </ul>"},{"location":"#developer-documentation","title":"\ud83c\udfd7\ufe0f Developer Documentation","text":"<ul> <li>Architecture Overview</li> <li>API Reference</li> <li>Deployment Guide</li> <li>Contributing Guidelines</li> </ul>"},{"location":"#ai-integration","title":"\ud83e\udd16 AI Integration","text":"<ul> <li>AI Models Overview</li> <li>Prompt Management</li> <li>Story Generation</li> <li>TTS Integration</li> <li>\ud83d\udd0d Image Search System</li> </ul>"},{"location":"#database-caching","title":"\ud83d\uddc4\ufe0f Database &amp; Caching","text":"<ul> <li>MongoDB Integration</li> <li>Cache System</li> <li>Story Prepopulation</li> </ul>"},{"location":"#deployment-devops","title":"\ud83d\ude80 Deployment &amp; DevOps","text":"<ul> <li>Azure Resources</li> <li>GitHub Actions</li> <li>Monitoring &amp; Logs</li> </ul>"},{"location":"#performance-optimization","title":"\ud83d\udcca Performance &amp; Optimization","text":"<ul> <li>Performance Metrics</li> <li>Caching Strategy</li> <li>Cost Optimization</li> </ul>"},{"location":"#quick-links","title":"\ud83d\ude80 Quick Links","text":"<ul> <li>Live Game: https://orbgame.us</li> <li>API Endpoint: https://api.orbgame.us</li> <li>GitHub Repository: https://github.com/zimaxnet/orb-game</li> <li>Azure Portal: https://portal.azure.com</li> </ul>"},{"location":"#technology-stack","title":"\ud83d\udd27 Technology Stack","text":""},{"location":"#frontend","title":"Frontend","text":"<ul> <li>React 19.x with Vite build system</li> <li>Three.js for 3D graphics and animations</li> <li>@react-three/fiber and @react-three/drei for React 3D integration</li> <li>CSS Modules for component-specific styling</li> </ul>"},{"location":"#backend","title":"Backend","text":"<ul> <li>Node.js with Express server</li> <li>Azure OpenAI integration (o4-mini model)</li> <li>Azure Cosmos DB for MongoDB</li> <li>Azure Key Vault for secure credential management</li> </ul>"},{"location":"#deployment","title":"Deployment","text":"<ul> <li>Azure Web App for frontend hosting</li> <li>Azure Container Apps for backend services</li> <li>Azure Container Registry for Docker images</li> <li>GitHub Actions for CI/CD automation</li> </ul>"},{"location":"#current-status","title":"\ud83d\udcc8 Current Status","text":"<ul> <li>\u2705 Frontend: Live at https://orbgame.us</li> <li>\u2705 Backend: Live at https://api.orbgame.us</li> <li>\u2705 Database: 240+ historical figure stories pre-populated</li> <li>\u2705 AI Integration: o4-mini model with TTS support</li> <li>\u2705 Deployment: Automated CI/CD pipeline</li> <li>\u2705 Image System: 201 images covering historical figures (Google Custom Search API)</li> <li>\u2705 Image Display: Clean image display when available, clean text when no images</li> <li>\u2705 Google CSE Migration: Complete migration from deprecated Bing Image Search</li> </ul>"},{"location":"#latest-features-january-2025","title":"\ud83d\uddbc\ufe0f Latest Features (January 2025)","text":""},{"location":"#google-custom-search-api-migration","title":"\ud83d\udd0d Google Custom Search API Migration","text":"<ul> <li>Complete Migration: Successfully migrated from Bing Image Search (deprecated August 2025) to Google Custom Search API</li> <li>Comprehensive Setup: Configured Google CSE with 409 curated sites for optimal historical figure image search</li> <li>API Integration: Working Google Custom Search API with proper authentication and rate limiting</li> <li>Image Inventory: 201 total images covering historical figures across all categories and epochs</li> <li>Download System: Automated image download system with proper User-Agent headers for Wikimedia compliance</li> <li>Fallback System: Guaranteed image coverage with placeholder images when API limits are reached</li> <li>Rate Limit Management: 100 free queries/day with intelligent fallback when limits are hit</li> <li>Multiple Image Types: Portraits, achievements, inventions, and artifacts for each historical figure</li> <li>Quality Control: Licensing compliance, historical accuracy, and visual quality verification</li> <li>Success Metrics: 26.5% download success rate with 127 new images added to collection</li> </ul>"},{"location":"#image-display-system","title":"Image Display System","text":"<ul> <li>Clean Image Display: Images are displayed when available, clean text when no images</li> <li>No Placeholder Elements: When no images are available, shows story text directly without clutter</li> <li>Proper Fallback Logic: Handles both array format (new) and object format (old) image structures</li> <li>Error Handling: Graceful fallback to text display if images fail to load</li> <li>Responsive Design: Images scale properly on all device sizes</li> <li>Loading States: Clear indicators for image loading and error states</li> <li>Source Attribution: Display of image sources, licensing, and permalinks</li> <li>Gallery Navigation: Smooth transitions between multiple images per historical figure</li> <li>Asynchronous Loading: Images populate in background while stories load instantly</li> </ul>"},{"location":"#enhanced-story-panel","title":"Enhanced Story Panel","text":"<ul> <li>Clear Content Hierarchy: Historical figure name \u2192 Key achievements \u2192 Images \u2192 Full story</li> <li>\ud83c\udfc6 Key Achievements Section: Prominent display with blue gradient background and trophy icon</li> <li>\ud83d\uddbc\ufe0f Enhanced Image Integration: Images displayed between achievements and story with proper navigation</li> <li>\ud83d\udcd6 Full Story Section: Expandable detailed narrative with \"Read Full Story\" button</li> <li>Visual Design: Professional appearance with color-coded sections and icons</li> <li>Typography Hierarchy: Clear size and weight differences for better readability</li> <li>Responsive Layout: Optimized for mobile and desktop with proper spacing</li> <li>Educational Flow: Logical learning progression from recognition to deep understanding</li> </ul>"},{"location":"#contributing","title":"\ud83e\udd1d Contributing","text":"<p>We welcome contributions! Please see our Contributing Guidelines for details on how to:</p> <ul> <li>Report bugs and issues</li> <li>Submit feature requests</li> <li>Contribute code improvements</li> <li>Update documentation</li> </ul>"},{"location":"#support","title":"\ud83d\udcde Support","text":"<ul> <li>GitHub Issues: Report bugs and feature requests</li> <li>Documentation Issues: Report documentation problems</li> <li>Email: contact@zimax.net</li> </ul> <p>Last Updated: January 2025 Version: 1.0.0 Maintained by: Zimax AI Labs </p>"},{"location":"enterprise-spec/","title":"AIMCS Enterprise Technical Specification","text":""},{"location":"enterprise-spec/#1-overview","title":"1. Overview","text":"<p>Brief summary of the enterprise goals and guiding principles.</p>"},{"location":"enterprise-spec/#2-multi-tenant-database-design","title":"2. Multi-Tenant Database Design","text":"<ul> <li>Tenant isolation strategy (Cosmos DB schema, partitioning)</li> <li>Data model diagrams</li> <li>Access patterns</li> </ul>"},{"location":"enterprise-spec/#3-authentication-authorization","title":"3. Authentication &amp; Authorization","text":"<ul> <li>Azure AD B2C integration plan (frontend &amp; backend)</li> <li>User roles and RBAC matrix</li> <li>Token validation and session management</li> </ul>"},{"location":"enterprise-spec/#4-environment-planning","title":"4. Environment Planning","text":"<ul> <li>Staging vs. production separation</li> <li>Environment variables and secrets management</li> <li>Deployment pipeline considerations</li> </ul>"},{"location":"enterprise-spec/#5-api-expansion","title":"5. API Expansion","text":"<ul> <li>New endpoints and route structure</li> <li>Backward compatibility with /api/chat</li> <li>Example request/response payloads</li> </ul>"},{"location":"enterprise-spec/#6-security-compliance","title":"6. Security &amp; Compliance","text":"<ul> <li>Security audit findings</li> <li>RBAC implementation details</li> <li>Audit logging requirements</li> <li>Data privacy and compliance notes</li> </ul>"},{"location":"enterprise-spec/#7-azure-resource-planning","title":"7. Azure Resource Planning","text":"<ul> <li>List of required Azure services (Cosmos DB, AD B2C, etc.)</li> <li>Cost estimates and scaling considerations</li> <li>Resource provisioning steps</li> </ul>"},{"location":"enterprise-spec/#8-migration-plan","title":"8. Migration Plan","text":"<ul> <li>Steps to migrate from stateless to persistent (Cosmos DB)</li> <li>Data migration scripts/strategy</li> <li>Rollback and testing plan</li> </ul>"},{"location":"enterprise-spec/#9-milestones-timeline","title":"9. Milestones &amp; Timeline","text":"<ul> <li>Key deliverables and deadlines</li> <li>Progress tracking checklist</li> </ul> <p>This document is a living specification. Update as research and planning progress. </p>"},{"location":"ai-integration/image-search/","title":"Image Search System","text":""},{"location":"ai-integration/image-search/#overview","title":"Overview","text":"<p>The Orb Game uses Google Custom Search API for retrieving high-quality images of historical figures. This system provides comprehensive image coverage for all 120 historical figures across 8 categories and 5 epochs.</p>"},{"location":"ai-integration/image-search/#google-custom-search-api-migration","title":"Google Custom Search API Migration","text":""},{"location":"ai-integration/image-search/#migration-summary","title":"Migration Summary","text":"<ul> <li>From: Bing Image Search API (deprecated August 2025)</li> <li>To: Google Custom Search API</li> <li>Status: \u2705 Complete</li> <li>Date: January 2025</li> </ul>"},{"location":"ai-integration/image-search/#key-features","title":"Key Features","text":"<ul> <li>409 Curated Sites: Comprehensive list of museums, educational institutions, and historical archives</li> <li>Multiple Image Types: Portraits, achievements, inventions, and artifacts</li> <li>Rate Limit Management: 100 free queries/day with intelligent fallback</li> <li>Quality Control: Licensing compliance and historical accuracy verification</li> <li>Automated Download: Scripts for bulk image retrieval and processing</li> </ul>"},{"location":"ai-integration/image-search/#configuration","title":"Configuration","text":""},{"location":"ai-integration/image-search/#api-setup","title":"API Setup","text":"<ol> <li>Google Cloud Console</li> <li>Enable Custom Search API</li> <li>Create API key with no restrictions</li> <li> <p>Configure billing (required for API access)</p> </li> <li> <p>Custom Search Engine</p> </li> <li>Create at https://cse.google.com/</li> <li>Enable \"Search the entire web\"</li> <li>Add 409 curated sites for optimal results</li> <li> <p>Note the Search Engine ID (CX)</p> </li> <li> <p>Azure Key Vault Storage <pre><code>az keyvault secret set --vault-name \"orb-game-kv-eastus2\" --name \"GOOGLE-CSE-API-KEY\" --value \"YOUR_API_KEY\"\naz keyvault secret set --vault-name \"orb-game-kv-eastus2\" --name \"GOOGLE-CSE-CX\" --value \"YOUR_SEARCH_ENGINE_ID\"\n</code></pre></p> </li> </ol>"},{"location":"ai-integration/image-search/#environment-variables","title":"Environment Variables","text":"<pre><code>GOOGLE_CSE_API_KEY=your-api-key\nGOOGLE_CSE_CX=your-search-engine-id\n</code></pre>"},{"location":"ai-integration/image-search/#implementation","title":"Implementation","text":""},{"location":"ai-integration/image-search/#core-scripts","title":"Core Scripts","text":""},{"location":"ai-integration/image-search/#scriptsgoogle-custom-searchpy","title":"<code>scripts/google-custom-search.py</code>","text":"<p>Main script for searching and retrieving images:</p> <pre><code>class GoogleCustomSearchService:\n    def __init__(self, api_key=None, cx=None):\n        self.api_key = api_key\n        self.cx = cx\n        self.endpoint = 'https://www.googleapis.com/customsearch/v1'\n\n    def search_google_images(self, query, count=1):\n        # Performs Google Custom Search API calls\n        # Returns list of image URLs\n\n    def generate_search_queries(self, figure_name, category, image_type):\n        # Generates optimized search queries\n        # Returns list of search terms\n\n    def fill_image_gaps(self, figures_data):\n        # Main method to process all figures\n        # Returns complete image data structure\n</code></pre>"},{"location":"ai-integration/image-search/#scriptsdownload-google-cse-imagespy","title":"<code>scripts/download-google-cse-images.py</code>","text":"<p>Downloads images from search results:</p> <pre><code>def download_image(url, filename, folder=\"downloaded_images\"):\n    # Downloads image with proper headers\n    # Handles Wikimedia compliance requirements\n\ndef download_all_images():\n    # Processes JSON results file\n    # Downloads all found images\n    # Provides progress tracking and error handling\n</code></pre>"},{"location":"ai-integration/image-search/#scriptsinventory-imagespy","title":"<code>scripts/inventory-images.py</code>","text":"<p>Analyzes image coverage:</p> <pre><code>def analyze_inventory():\n    # Compares existing images vs required figures\n    # Provides detailed coverage statistics\n    # Identifies missing images by category\n</code></pre>"},{"location":"ai-integration/image-search/#search-strategy","title":"Search Strategy","text":""},{"location":"ai-integration/image-search/#query-generation","title":"Query Generation","text":"<p>For each historical figure, the system generates multiple search queries:</p> <ol> <li>Portrait Queries</li> <li><code>\"Figure Name\" portrait</code></li> <li> <p><code>\"Figure Name\" historical portrait</code></p> </li> <li> <p>Achievement Queries</p> </li> <li><code>\"Figure Name\" category achievement</code></li> <li> <p><code>\"Figure Name\" famous work</code></p> </li> <li> <p>Invention Queries</p> </li> <li><code>\"Figure Name\" invention</code></li> <li> <p><code>\"Figure Name\" discovery</code></p> </li> <li> <p>Artifact Queries</p> </li> <li><code>\"Figure Name\" artifact</code></li> <li><code>\"Figure Name\" historical object</code></li> </ol>"},{"location":"ai-integration/image-search/#fallback-system","title":"Fallback System","text":"<p>When API calls fail or return no results:</p> <ol> <li>Rate Limit Fallback: Uses placeholder images when 429 errors occur</li> <li>No Results Fallback: Uses generic historical images</li> <li>Error Fallback: Uses SVG placeholders for missing images</li> </ol>"},{"location":"ai-integration/image-search/#image-inventory","title":"Image Inventory","text":""},{"location":"ai-integration/image-search/#current-status","title":"Current Status","text":"<ul> <li>Total Images: 201</li> <li>Required Figures: 120</li> <li>Coverage: 15.0% (18/120 figures have complete image sets)</li> <li>Success Rate: 26.5% download success rate</li> </ul>"},{"location":"ai-integration/image-search/#image-types","title":"Image Types","text":"<ol> <li>Portraits: Historical figure portraits and paintings</li> <li>Achievements: Images of their key accomplishments</li> <li>Inventions: Images of their discoveries and creations</li> <li>Artifacts: Historical objects and artifacts</li> </ol>"},{"location":"ai-integration/image-search/#categories-covered","title":"Categories Covered","text":"<ul> <li>Technology: 15 figures</li> <li>Science: 15 figures</li> <li>Art: 15 figures</li> <li>Nature: 15 figures</li> <li>Sports: 15 figures</li> <li>Music: 15 figures</li> <li>Space: 15 figures</li> <li>Innovation: 15 figures</li> </ul>"},{"location":"ai-integration/image-search/#usage","title":"Usage","text":""},{"location":"ai-integration/image-search/#testing-the-setup","title":"Testing the Setup","text":"<pre><code># Test API configuration\npython3 scripts/test-google-cse-setup.py\n\n# Run full image search\npython3 scripts/google-custom-search.py\n\n# Download found images\npython3 scripts/download-google-cse-images.py\n\n# Check inventory status\npython3 scripts/inventory-images.py\n</code></pre>"},{"location":"ai-integration/image-search/#api-limits","title":"API Limits","text":"<ul> <li>Free Tier: 100 queries/day</li> <li>Paid Tier: $5 per 1000 queries</li> <li>Rate Limiting: Intelligent fallback when limits reached</li> </ul>"},{"location":"ai-integration/image-search/#troubleshooting","title":"Troubleshooting","text":""},{"location":"ai-integration/image-search/#common-issues","title":"Common Issues","text":"<ol> <li>403 Forbidden Errors</li> <li>Check API key restrictions</li> <li>Verify Custom Search API is enabled</li> <li> <p>Ensure \"Search the entire web\" is enabled</p> </li> <li> <p>404 Not Found Errors</p> </li> <li>Verify Search Engine ID (CX) is correct</li> <li>Check Custom Search Engine configuration</li> <li> <p>Ensure sites are properly added to CSE</p> </li> <li> <p>429 Too Many Requests</p> </li> <li>API rate limit reached</li> <li>System automatically uses fallback images</li> <li> <p>Wait for daily reset or upgrade to paid tier</p> </li> <li> <p>Download Failures</p> </li> <li>Check User-Agent headers for Wikimedia compliance</li> <li>Verify network connectivity</li> <li>Check file permissions for download directory</li> </ol>"},{"location":"ai-integration/image-search/#debugging-commands","title":"Debugging Commands","text":"<pre><code># Test API credentials\npython3 scripts/test-cse-simple.py\n\n# Check Key Vault secrets\naz keyvault secret show --name \"GOOGLE-CSE-API-KEY\" --vault-name \"orb-game-kv-eastus2\"\naz keyvault secret show --name \"GOOGLE-CSE-CX\" --vault-name \"orb-game-kv-eastus2\"\n\n# Fix malformed credentials\n./scripts/fix-google-cse-credentials.sh\n</code></pre>"},{"location":"ai-integration/image-search/#performance","title":"Performance","text":""},{"location":"ai-integration/image-search/#optimization-strategies","title":"Optimization Strategies","text":"<ol> <li>Caching: Images are cached locally after download</li> <li>Batch Processing: Multiple figures processed in single run</li> <li>Error Recovery: Graceful handling of failed downloads</li> <li>Progress Tracking: Real-time status updates during processing</li> </ol>"},{"location":"ai-integration/image-search/#metrics","title":"Metrics","text":"<ul> <li>Search Success Rate: 100% (all figures processed)</li> <li>Download Success Rate: 26.5% (127/480 images)</li> <li>Processing Time: ~5 minutes for full dataset</li> <li>Storage: ~50MB for 201 images</li> </ul>"},{"location":"ai-integration/image-search/#future-improvements","title":"Future Improvements","text":"<ol> <li>Enhanced Query Optimization: Better search term generation</li> <li>Quality Filtering: Automatic image quality assessment</li> <li>Batch Download: Parallel download processing</li> <li>Alternative Sources: Integration with additional image APIs</li> <li>Manual Curation: Interface for manual image selection</li> </ol>"},{"location":"ai-integration/image-search/#related-files","title":"Related Files","text":"<ul> <li><code>scripts/google-custom-search.py</code>: Main search implementation</li> <li><code>scripts/download-google-cse-images.py</code>: Image download system</li> <li><code>scripts/inventory-images.py</code>: Coverage analysis</li> <li><code>scripts/test-google-cse-setup.py</code>: Configuration testing</li> <li><code>GOOGLE_CSE_MIGRATION_SUMMARY.md</code>: Migration documentation</li> <li><code>google_custom_search_results.json</code>: Search results data </li> </ul>"},{"location":"developer/architecture/","title":"Architecture Overview","text":""},{"location":"developer/architecture/#system-architecture","title":"\ud83c\udfd7\ufe0f System Architecture","text":""},{"location":"developer/architecture/#frontend-architecture","title":"Frontend Architecture","text":"<ul> <li>React 19.x with modern hooks</li> <li>Three.js for 3D graphics</li> <li>Vite for build system</li> <li>CSS Modules for styling</li> </ul>"},{"location":"developer/architecture/#backend-architecture","title":"Backend Architecture","text":"<ul> <li>Node.js with Express</li> <li>Azure OpenAI integration</li> <li>Azure Cosmos DB for storage</li> <li>Azure Key Vault for secrets</li> </ul>"},{"location":"developer/architecture/#deployment-architecture","title":"Deployment Architecture","text":"<ul> <li>Azure Web App for frontend</li> <li>Azure Container Apps for backend</li> <li>GitHub Actions for CI/CD</li> </ul> <p>Detailed architecture documentation coming soon...</p>"},{"location":"developer/cursor-rules/","title":"Cursor Rules","text":"<p>This document contains the development rules and guidelines for the Orb Game project.</p>"},{"location":"developer/cursor-rules/#orb-game-cursor-rules","title":"Orb Game - Cursor Rules","text":""},{"location":"developer/cursor-rules/#project-overview","title":"\ud83c\udfae Project Overview","text":"<p>Orb Game is an advanced AI-powered interactive gaming platform that combines time travel, positive news discovery, and multimodal AI technology. The system features a React frontend with 3D Three.js graphics, a Node.js backend with multiple AI model integrations, and comprehensive Azure cloud deployment.</p>"},{"location":"developer/cursor-rules/#architecture-patterns","title":"\ud83c\udfd7\ufe0f Architecture Patterns","text":""},{"location":"developer/cursor-rules/#frontend-react-vite","title":"Frontend (React + Vite)","text":"<ul> <li>Main Component: <code>components/OrbGame.jsx</code> - 3D interactive gaming experience</li> <li>State Management: React hooks with context providers (<code>contexts/LanguageContext.jsx</code>)</li> <li>3D Graphics: Three.js with @react-three/fiber and @react-three/drei</li> <li>Build System: Vite with React 19.x support</li> <li>Styling: CSS modules with component-specific stylesheets</li> </ul>"},{"location":"developer/cursor-rules/#backend-nodejs-express","title":"Backend (Node.js + Express)","text":"<ul> <li>Main Server: <code>backend/backend-server.js</code> - Production API server</li> <li>Services: Modular service architecture (MemoryService, PositiveNewsService, StoryCacheService)</li> <li>AI Integration: Multiple AI models (Grok 4, Perplexity Sonar, Gemini 1.5 Flash, O4-Mini)</li> <li>Database: Azure Cosmos DB for MongoDB with caching system</li> <li>Security: Azure Key Vault for API key management</li> </ul>"},{"location":"developer/cursor-rules/#deployment-azure","title":"Deployment (Azure)","text":"<ul> <li>Frontend: Azure Web App with GitHub Actions CI/CD</li> <li>Backend: Azure Container Apps with auto-scaling</li> <li>Registry: Azure Container Registry (<code>orbgameregistry</code>)</li> <li>Secrets: Azure Key Vault with RBAC authentication</li> </ul>"},{"location":"developer/cursor-rules/#development-guidelines","title":"\ud83d\udd27 Development Guidelines","text":""},{"location":"developer/cursor-rules/#file-structure","title":"File Structure","text":"<pre><code>orb-game/\n\u251c\u2500\u2500 components/          # React components\n\u251c\u2500\u2500 contexts/           # React context providers\n\u251c\u2500\u2500 utils/              # Utility functions (promptManager)\n\u251c\u2500\u2500 api/                # API client functions\n\u251c\u2500\u2500 backend/            # Node.js backend server\n\u251c\u2500\u2500 scripts/            # Deployment and utility scripts\n\u251c\u2500\u2500 public/             # Static assets\n\u2514\u2500\u2500 docs/               # Documentation\n</code></pre>"},{"location":"developer/cursor-rules/#naming-conventions","title":"Naming Conventions","text":"<ul> <li>Components: PascalCase (e.g., <code>OrbGame.jsx</code>)</li> <li>Files: kebab-case for scripts, camelCase for modules</li> <li>Variables: camelCase</li> <li>Constants: UPPER_SNAKE_CASE</li> <li>Functions: camelCase</li> <li>Classes: PascalCase</li> </ul>"},{"location":"developer/cursor-rules/#code-style","title":"Code Style","text":"<ul> <li>JavaScript: ES6+ modules with import/export</li> <li>React: Functional components with hooks</li> <li>CSS: Component-specific stylesheets</li> <li>Backend: Async/await with proper error handling</li> <li>Comments: JSDoc style for functions and classes</li> </ul>"},{"location":"developer/cursor-rules/#ai-model-integration","title":"\ud83e\udd16 AI Model Integration","text":""},{"location":"developer/cursor-rules/#supported-ai-models","title":"Supported AI Models","text":"<ol> <li>Grok 4 - Advanced reasoning and creative storytelling</li> <li>Perplexity Sonar - Real-time web search and synthesis</li> <li>Gemini 1.5 Flash - Fast and creative content generation</li> <li>O4-Mini - Efficient and reliable processing</li> </ol>"},{"location":"developer/cursor-rules/#ai-model-parameters","title":"AI Model Parameters","text":"<ul> <li>O4-Mini: Use <code>max_completion_tokens</code> (not <code>max_tokens</code>), no <code>temperature</code> parameter</li> <li>TTS Models: Use <code>Authorization: Bearer</code> header (not <code>api-key</code>)</li> <li>Token Limits: 2000 tokens for complete JSON responses</li> <li>TTS Voices: Use <code>alloy</code> voice for both English and Spanish (avoid <code>jorge</code> - not supported)</li> </ul>"},{"location":"developer/cursor-rules/#azure-openai-configuration","title":"Azure OpenAI Configuration","text":"<ul> <li>Endpoint: <code>https://aimcs-foundry.cognitiveservices.azure.com/</code></li> <li>API Version: <code>2024-12-01-preview</code> (required for o4-mini model)</li> <li>Model: <code>o4-mini</code></li> <li>Deployment: <code>o4-mini</code></li> <li>Parameter: Use <code>max_completion_tokens</code> instead of <code>max_tokens</code></li> <li>Example Python Configuration:   <pre><code>from openai import AzureOpenAI\n\nclient = AzureOpenAI(\n    api_version=\"2024-12-01-preview\",\n    azure_endpoint=\"https://aimcs-foundry.cognitiveservices.azure.com/\",\n    api_key=\"your-api-key\",\n)\n\nresponse = client.chat.completions.create(\n    messages=[{\"role\": \"user\", \"content\": \"Hello\"}],\n    max_completion_tokens=1000,\n    model=\"o4-mini\"\n)\n</code></pre></li> </ul>"},{"location":"developer/cursor-rules/#adding-new-ai-models","title":"Adding New AI Models","text":"<ol> <li>Store API key in Azure Key Vault</li> <li>Add model function to <code>backend-server.js</code></li> <li>Update frontend model selection in <code>OrbGame.jsx</code></li> <li>Add prompts to <code>utils/promptReferenceData.js</code></li> <li>Test with <code>scripts/test-ai-models.js</code></li> </ol>"},{"location":"developer/cursor-rules/#story-prepopulation-system","title":"Story Prepopulation System","text":"<ul> <li>Script: <code>scripts/prepopulate-all-stories.js</code> - Generates 240+ historical figure stories</li> <li>Missing Stories Script: <code>scripts/generate-missing-stories.js</code> - Generates only missing stories (token efficient)</li> <li>Key Vault Integration: Automatically fetches credentials from <code>orb-game-kv-eastus2</code></li> <li>Data Sources: <code>EpochalCategoryStoryMap.md</code> and <code>OrbGameInfluentialPeopleSeeds</code></li> <li>Execution: <code>./scripts/run-prepopulation.sh</code> - Interactive script with confirmation</li> <li>Coverage: 8 categories \u00d7 5 epochs \u00d7 2 languages \u00d7 3 figures = 240 stories</li> <li>TTS Integration: Generates audio for each story using Azure OpenAI TTS (<code>alloy</code> voice)</li> <li>MongoDB Storage: Stores stories with TTL for automatic cleanup</li> <li>Error Tracking: Comprehensive error statistics for JSON parse, TTS, API, MongoDB, and network errors</li> </ul>"},{"location":"developer/cursor-rules/#prompt-management-system","title":"\ud83c\udfaf Prompt Management System","text":""},{"location":"developer/cursor-rules/#centralized-prompt-system","title":"Centralized Prompt System","text":"<ul> <li>Source: <code>PROMPTS_REFERENCE.md</code> - Single source of truth</li> <li>Manager: <code>utils/promptManager.js</code> - Dynamic prompt generation</li> <li>Data: <code>utils/promptReferenceData.js</code> - Structured prompt data</li> <li>Categories: Technology, Science, Art, Nature, Sports, Music, Space, Innovation</li> <li>Epochs: Ancient, Medieval, Industrial, Modern, Future</li> <li>Languages: English and Spanish with cultural sensitivity</li> </ul>"},{"location":"developer/cursor-rules/#prompt-structure","title":"Prompt Structure","text":"<pre><code>// Model-specific prompts with category, epoch, language support\nconst prompt = promptManager.getFrontendPrompt(category, epoch, language, model);\n</code></pre>"},{"location":"developer/cursor-rules/#internationalization","title":"\ud83c\udf0d Internationalization","text":""},{"location":"developer/cursor-rules/#language-support","title":"Language Support","text":"<ul> <li>Primary: English (<code>en</code>)</li> <li>Secondary: Spanish (<code>es</code>)</li> <li>Context: <code>contexts/LanguageContext.jsx</code></li> <li>TTS Voices: <code>alloy</code> (English), <code>jorge</code> (Spanish)</li> <li>Caching: Language-specific story and audio caching</li> </ul>"},{"location":"developer/cursor-rules/#translation-guidelines","title":"Translation Guidelines","text":"<ul> <li>Use <code>useLanguage()</code> hook for language context</li> <li>Cache stories separately by language</li> <li>Provide culturally appropriate content</li> <li>Support language switching with story refresh</li> </ul>"},{"location":"developer/cursor-rules/#database-caching","title":"\ud83d\uddc4\ufe0f Database &amp; Caching","text":""},{"location":"developer/cursor-rules/#mongodb-integration","title":"MongoDB Integration","text":"<ul> <li>Connection: Azure Cosmos DB for MongoDB (<code>orb-game-mongodb-eastus2</code>)</li> <li>Collections: Stories, memories, analytics</li> <li>Throughput: 2000 RU/s per collection (stories, positive_news_stories, audio, users, connection_test)</li> <li>Performance: 5x throughput increase from 400 RU/s baseline</li> <li>Caching: 88.2% performance improvement for cached requests</li> <li>TTL: 30-day expiration for cached content</li> <li>Cost: ~$0.008/hour per collection at 2000 RU/s</li> </ul>"},{"location":"developer/cursor-rules/#cache-management","title":"Cache Management","text":"<pre><code>// Check cache before generating new content\nconst cachedStories = await storyCacheService.getStories(category, epoch, model, language);\nif (cachedStories.length &gt; 0) {\n  return cachedStories;\n}\n</code></pre>"},{"location":"developer/cursor-rules/#deployment-patterns","title":"\ud83d\ude80 Deployment Patterns","text":""},{"location":"developer/cursor-rules/#azure-resources","title":"Azure Resources","text":"<ul> <li>Resource Group: <code>orb-game-rg-eastus2</code></li> <li>Frontend: Azure Web App (<code>orb-game</code>) - Live at https://orbgame.us</li> <li>Backend: Azure Container Apps (<code>orb-game-backend-eastus2</code>)</li> <li>Registry: Azure Container Registry (<code>orbgameregistry</code>)</li> <li>Key Vault: <code>orb-game-kv-eastus2</code></li> </ul>"},{"location":"developer/cursor-rules/#deployment-automation","title":"Deployment Automation","text":"<ul> <li>GitHub Actions: Automatic deployment on push to main branch</li> <li>Frontend: <code>.github/workflows/deploy-frontend.yml</code> - Auto-deploys on any push</li> <li>Backend: <code>.github/workflows/deploy-backend.yml</code> - Deploys on backend changes</li> <li>Full Deployment: <code>.github/workflows/deploy-full.yml</code> - Complete CI/CD pipeline</li> <li>Local Deployment: Manual deployment scripts for development</li> <li>Frontend: <code>scripts/deploy-azure.sh</code> - Build and deploy frontend</li> <li>Backend: <code>scripts/build-backend.sh</code> - Build and push backend container</li> <li>Full: <code>scripts/deploy-full.sh</code> - Complete local deployment</li> </ul>"},{"location":"developer/cursor-rules/#efficient-rebuild-redeployment-procedures","title":"Efficient Rebuild &amp; Redeployment Procedures","text":""},{"location":"developer/cursor-rules/#quick-local-deployment-development","title":"Quick Local Deployment (Development)","text":"<pre><code># Frontend only (fastest)\nnpm run build\ncd dist &amp;&amp; zip -r ../deploy.zip . &amp;&amp; cd ..\naz webapp deploy --resource-group orb-game-rg-eastus2 --name orb-game --src-path deploy.zip --type zip\n\n# Backend only\ndocker build --platform linux/amd64 -f backend/backend-Dockerfile -t orbgameregistry.azurecr.io/orb-game-backend:latest .\naz acr login --name orbgameregistry\ndocker push orbgameregistry.azurecr.io/orb-game-backend:latest\naz containerapp update --name orb-game-backend-eastus2 --resource-group orb-game-rg-eastus2 --image orbgameregistry.azurecr.io/orb-game-backend:latest\n\n# Full deployment (both frontend and backend)\n./scripts/deploy-full.sh\n</code></pre>"},{"location":"developer/cursor-rules/#github-actions-deployment-production","title":"GitHub Actions Deployment (Production)","text":"<ul> <li>Automatic: Push to main branch triggers automatic deployment</li> <li>Frontend: Deploys on any file change</li> <li>Backend: Deploys only on backend-related changes (backend/, scripts/, .github/workflows/deploy-backend.yml)</li> <li>Manual: Use GitHub Actions \"workflow_dispatch\" for manual deployment</li> </ul>"},{"location":"developer/cursor-rules/#deployment-verification","title":"Deployment Verification","text":"<pre><code># Test frontend deployment\ncurl -s \"https://orbgame.us\" | head -5\n\n# Test backend deployment\ncurl -s \"https://api.orbgame.us/api/orb/positive-news/Technology?count=1&amp;epoch=Modern&amp;language=en&amp;storyType=historical-figure\" | head -5\n\n# Check deployment status\naz webapp show --name orb-game --resource-group orb-game-rg-eastus2 --query \"state\"\naz containerapp show --name orb-game-backend-eastus2 --resource-group orb-game-rg-eastus2 --query \"properties.provisioningState\"\n\n# Verify historical figure stories are working\ncurl -s \"https://api.orbgame.us/api/orb/positive-news/Technology?count=1&amp;epoch=Modern&amp;language=en&amp;storyType=historical-figure\" | jq '.[0].headline'\n</code></pre>"},{"location":"developer/cursor-rules/#docker-platform-requirements","title":"Docker Platform Requirements","text":"<ul> <li>Backend Images: Must be built for <code>linux/amd64</code> platform</li> <li>Build Command: <code>docker build --platform linux/amd64 -f backend-Dockerfile -t orbgameregistry.azurecr.io/orb-game-backend:latest .</code></li> <li>Azure Container Apps: Require amd64 images for proper deployment</li> <li>Local Development: Use <code>--platform linux/amd64</code> flag for Docker builds</li> </ul>"},{"location":"developer/cursor-rules/#deployment-scripts","title":"Deployment Scripts","text":"<ul> <li>Full Deployment: <code>scripts/deploy-full.sh</code></li> <li>Frontend Only: <code>scripts/deploy-azure.sh</code></li> <li>Backend Only: <code>scripts/setup-backend.sh</code></li> <li>Environment Setup: <code>scripts/set-azure-build-env.sh</code></li> <li>Quick Deploy: <code>scripts/deploy-manual.sh</code> - Fast manual deployment</li> </ul>"},{"location":"developer/cursor-rules/#current-deployment-status-december-2024","title":"Current Deployment Status (December 2024)","text":"<ul> <li>Frontend: \u2705 Live at https://orbgame.us (Azure Web App)</li> <li>Backend: \u2705 Live at https://api.orbgame.us (Azure Container Apps)</li> <li>Database: \u2705 Azure Cosmos DB for MongoDB with 239+ historical figure stories</li> <li>GitHub Actions: \u2705 Automatic deployment on push to main branch</li> <li>Historical Figures: \u2705 Working with proper storyType parameter support</li> <li>Learn More Feature: \u2705 Enhanced to provide detailed historical figure information</li> </ul>"},{"location":"developer/cursor-rules/#environment-variables","title":"Environment Variables","text":"<pre><code># Required for backend\nMONGO_URI=your-azure-cosmos-db-connection-string\nAZURE_OPENAI_ENDPOINT=https://aimcs-foundry.cognitiveservices.azure.com/\nAZURE_OPENAI_API_KEY=your-azure-openai-api-key\nAZURE_OPENAI_DEPLOYMENT=o4-mini\nAZURE_OPENAI_TTS_DEPLOYMENT=gpt-4o-mini-tts\nPERPLEXITY_API_KEY=your-perplexity-api-key\n</code></pre>"},{"location":"developer/cursor-rules/#testing-quality-assurance","title":"\ud83e\uddea Testing &amp; Quality Assurance","text":""},{"location":"developer/cursor-rules/#test-scripts","title":"Test Scripts","text":"<ul> <li>AI Models: <code>scripts/test-ai-models.js</code></li> <li>Backend: <code>scripts/test-new-backend.js</code></li> <li>Cache System: <code>scripts/test-story-cache-comprehensive.js</code></li> <li>Performance: <code>scripts/performance-comparison.js</code></li> <li>Memory: <code>scripts/test-memory.sh</code></li> </ul>"},{"location":"developer/cursor-rules/#testing-guidelines","title":"Testing Guidelines","text":"<ul> <li>Run comprehensive test suite before deployment</li> <li>Verify all AI models are working: <code>node scripts/test-ai-models.js</code></li> <li>Test story generation: <code>node scripts/test-fixed-story-generation.js</code></li> <li>Debug API issues: <code>node scripts/debug-api-response.js</code></li> <li>Check cache performance metrics</li> <li>Validate multi-language support</li> <li>Test Azure Key Vault integration</li> </ul>"},{"location":"developer/cursor-rules/#security-authentication","title":"\ud83d\udd12 Security &amp; Authentication","text":""},{"location":"developer/cursor-rules/#azure-key-vault-integration","title":"Azure Key Vault Integration","text":"<ul> <li>RBAC: Role-Based Access Control (not access policies)</li> <li>Managed Identity: Container app uses managed identity</li> <li>Secrets: All API keys stored securely</li> <li>Permissions: \"Key Vault Secrets User\" role required</li> </ul>"},{"location":"developer/cursor-rules/#security-best-practices","title":"Security Best Practices","text":"<ul> <li>Never commit API keys to source code</li> <li>Use environment variables for configuration</li> <li>Implement proper CORS headers</li> <li>Validate all user inputs</li> <li>Use HTTPS for all communications</li> </ul>"},{"location":"developer/cursor-rules/#performance-optimization","title":"\ud83d\udcca Performance Optimization","text":""},{"location":"developer/cursor-rules/#caching-strategy","title":"Caching Strategy","text":"<ul> <li>Database Caching: MongoDB-based story and audio caching</li> <li>Performance: 88.2% faster response times for cached requests</li> <li>Cost Savings: 29.0% reduction in token usage</li> <li>Cache Hit Rate: 50% in test scenarios</li> </ul>"},{"location":"developer/cursor-rules/#optimization-guidelines","title":"Optimization Guidelines","text":"<ul> <li>Preload stories for selected epochs</li> <li>Cache TTS audio as base64 in database</li> <li>Use efficient Three.js rendering</li> <li>Implement proper error handling</li> <li>Monitor Azure resource usage</li> </ul>"},{"location":"developer/cursor-rules/#gaming-features","title":"\ud83c\udfae Gaming Features","text":""},{"location":"developer/cursor-rules/#core-gameplay","title":"Core Gameplay","text":"<ul> <li>3D Environment: Milky Way background with 5,000 animated stars</li> <li>Orb Interaction: Drag orbs to center for story discovery</li> <li>Epoch Selection: Time travel through different eras</li> <li>Category Exploration: 8 different news categories</li> <li>Audio Integration: Text-to-speech for immersive experience</li> </ul>"},{"location":"developer/cursor-rules/#user-experience","title":"User Experience","text":"<ul> <li>Responsive Design: Works on desktop and mobile</li> <li>Touch Controls: Swipe gestures for mobile interaction</li> <li>Visual Feedback: Animations and glow effects</li> <li>Accessibility: Audio controls and keyboard navigation</li> </ul>"},{"location":"developer/cursor-rules/#development-workflow","title":"\ud83d\udd27 Development Workflow","text":""},{"location":"developer/cursor-rules/#local-development","title":"Local Development","text":"<pre><code># Frontend\nnpm install --legacy-peer-deps\nnpm run dev\n\n# Backend\ncd backend\nnpm install\nnode backend-server.js\n</code></pre>"},{"location":"developer/cursor-rules/#github-actions-package-management-workflow","title":"GitHub Actions &amp; Package Management Workflow","text":"<ul> <li>CRITICAL WORKFLOW: When modifying dependencies, follow this exact sequence:</li> <li>Edit package.json with new dependencies</li> <li>Run <code>npm install</code> to update package-lock.json</li> <li>Verify with <code>npm list</code> that all packages are installed</li> <li>Test build locally: <code>npm run build</code></li> <li>Commit BOTH package.json AND package-lock.json together</li> <li> <p>Push to trigger GitHub Actions</p> </li> <li> <p>GitHub Actions Package Sync Issues:</p> </li> <li>Error: \"Missing: @types/react@19.1.9 from lock file\"</li> <li>Cause: package.json and package-lock.json are out of sync</li> <li>Prevention: Always run <code>npm install</code> after package.json changes</li> <li>Verification: Use <code>npm list</code> to check installed packages</li> <li> <p>Solution: Run <code>npm install</code> locally, commit both files, push</p> </li> <li> <p>Package Management Best Practices:</p> </li> <li>Never commit package.json without package-lock.json</li> <li>Always run <code>npm install</code> after dependency changes</li> <li>Use exact versions for critical dependencies</li> <li>Test locally before pushing to catch sync issues</li> <li>Verify with <code>npm ci</code> locally to simulate GitHub Actions environment</li> </ul>"},{"location":"developer/cursor-rules/#deployment-process","title":"Deployment Process","text":""},{"location":"developer/cursor-rules/#automated-deployment-recommended","title":"Automated Deployment (Recommended)","text":"<ol> <li>GitHub Actions: Push to main branch automatically triggers deployment</li> <li>Frontend: Any file change triggers frontend deployment</li> <li>Backend: Only backend-related changes trigger backend deployment</li> <li>Full: Complete CI/CD pipeline with testing and verification</li> </ol>"},{"location":"developer/cursor-rules/#manual-deployment-development","title":"Manual Deployment (Development)","text":"<ol> <li>Update Azure Key Vault secrets if needed</li> <li>Build and test locally: <code>npm run build &amp;&amp; npm test</code></li> <li>Run deployment scripts:</li> <li>Frontend only: <code>./scripts/deploy-azure.sh</code></li> <li>Backend only: <code>./scripts/build-backend.sh</code></li> <li>Full deployment: <code>./scripts/deploy-full.sh</code></li> <li>Verify Azure resources and test production endpoints</li> <li>Monitor deployment logs and health checks</li> </ol>"},{"location":"developer/cursor-rules/#seamless-automation-features","title":"Seamless Automation Features","text":"<ul> <li>Automatic Testing: GitHub Actions run tests before deployment</li> <li>Health Checks: Automatic verification of deployed services</li> <li>Rollback Capability: Previous versions can be restored if needed</li> <li>Environment Parity: Local, staging, and production environments are consistent</li> <li>Secret Management: Azure Key Vault integration for secure credential management</li> </ul>"},{"location":"developer/cursor-rules/#story-prepopulation-process","title":"Story Prepopulation Process","text":"<ol> <li>Ensure Azure Key Vault credentials are set</li> <li>Check existing stories: <code>node scripts/check-existing-stories.js</code></li> <li>Run missing stories generation: <code>node scripts/generate-missing-stories.js</code> (token efficient)</li> <li>Or run full prepopulation: <code>./scripts/run-prepopulation.sh</code> for interactive confirmation</li> <li>Monitor progress and error statistics</li> <li>Verify stories in MongoDB using <code>scripts/check-database-stories.js</code></li> <li>Test story loading in the game interface</li> </ol>"},{"location":"developer/cursor-rules/#git-workflow","title":"Git Workflow","text":"<ul> <li>Use descriptive commit messages</li> <li>Test changes before committing</li> <li>Update documentation for new features</li> <li>Follow semantic versioning</li> <li>CRITICAL: Always commit package.json and package-lock.json together</li> </ul>"},{"location":"developer/cursor-rules/#deployment-verification-monitoring","title":"Deployment Verification &amp; Monitoring","text":"<ul> <li>Health Checks: Verify both frontend and backend are responding</li> <li>Performance Monitoring: Monitor Azure resource usage and response times</li> <li>Error Tracking: Monitor application logs for errors and issues</li> <li>Automated Testing: Run comprehensive test suite before deployment</li> <li>Rollback Procedures: Keep previous versions available for quick rollback</li> <li>Package Sync Verification: Ensure package.json and package-lock.json are in sync before deployment </li> </ul>"},{"location":"developer/cursor-rules/#critical-notes","title":"\ud83d\udea8 Critical Notes","text":""},{"location":"developer/cursor-rules/#important-reminders","title":"Important Reminders","text":"<ul> <li>O4-Mini Model: Use <code>max_completion_tokens</code>, not <code>max_tokens</code></li> <li>Temperature Parameter: Not supported for O4-Mini (use default 1)</li> <li>Authorization Header: Use <code>Authorization: Bearer</code> for Azure OpenAI</li> <li>TTS Voice: Use <code>alloy</code> for both English and Spanish (avoid <code>jorge</code>)</li> <li>Token Limits: Use 2000 tokens for complete story generation</li> <li>Database Migration: All data migrated from <code>aimcs</code> to <code>orbgame</code></li> <li>Registry Name: Use <code>orbgame</code> registry, not <code>aimcsregistry</code></li> <li>Docker Platform: Always build with <code>--platform linux/amd64</code> for Azure Container Apps</li> <li>Azure OpenAI Endpoint: Use <code>https://aimcs-foundry.cognitiveservices.azure.com/</code></li> <li>API Version: Use <code>2024-12-01-preview</code> for o4-mini model</li> </ul>"},{"location":"developer/cursor-rules/#package-management-github-actions-sync-issues","title":"Package Management &amp; GitHub Actions Sync Issues","text":"<ul> <li>CRITICAL: Always run <code>npm install</code> after modifying package.json</li> <li>CRITICAL: Always commit both package.json AND package-lock.json together</li> <li>CRITICAL: Never commit package.json without running npm install first</li> <li>Common Error: \"Missing: @types/react@19.1.9 from lock file\" - indicates package.json and package-lock.json are out of sync</li> <li>Solution: Run <code>npm install</code> locally, then commit both files together</li> <li>Verification: Use <code>npm list</code> to check installed packages match package.json</li> <li>Prevention: Test build locally with <code>npm run build</code> before pushing</li> <li>GitHub Actions: Uses <code>npm ci</code> which requires exact package-lock.json match</li> </ul>"},{"location":"developer/cursor-rules/#troubleshooting-package-sync-issues","title":"Troubleshooting Package Sync Issues","text":""},{"location":"developer/cursor-rules/#github-actions-failure-missing-dependencies-from-lock-file","title":"GitHub Actions Failure: \"Missing dependencies from lock file\"","text":"<p>Error Message: <code>Missing: @types/react@19.1.9 from lock file</code></p> <p>Root Cause: package.json and package-lock.json are out of sync</p> <p>Immediate Fix: <pre><code># 1. Run npm install to sync package-lock.json\nnpm install\n\n# 2. Verify packages are installed correctly\nnpm list\n\n# 3. Test build locally\nnpm run build\n\n# 4. Commit both files together\ngit add package.json package-lock.json\ngit commit -m \"fix: sync package.json and package-lock.json\"\ngit push\n</code></pre></p> <p>Prevention Checklist: - [ ] Always run <code>npm install</code> after package.json changes - [ ] Verify with <code>npm list</code> that all packages are installed - [ ] Test build locally before committing - [ ] Commit both package.json AND package-lock.json together - [ ] Never commit package.json without running npm install first</p> <p>Verification Commands: <pre><code># Check if packages are in sync\nnpm list\n\n# Test build process\nnpm run build\n\n# Simulate GitHub Actions environment\nnpm ci\n</code></pre></p>"},{"location":"developer/cursor-rules/#common-issues","title":"Common Issues","text":"<ul> <li>Key Vault RBAC permissions for container app</li> <li>CORS configuration for cross-origin requests</li> <li>TTS audio generation for different languages</li> <li>Cache invalidation and story freshness</li> <li>Azure Container App scaling configuration</li> <li>Docker platform mismatch (must use <code>linux/amd64</code> for Azure Container Apps)</li> <li>Container App deployment failures due to wrong platform architecture</li> <li>API Parameter Issues: Use <code>max_completion_tokens</code> not <code>max_tokens</code> for o4-mini</li> <li>TTS Voice Issues: Use <code>alloy</code> voice (avoid <code>jorge</code> - not supported)</li> <li>Empty API Responses: Check token limits and parameter names</li> <li>JSON Parse Errors: Implement JSON fix attempts and empty content checks</li> <li>Package Lock Sync: Missing dependencies in package-lock.json cause GitHub Actions failures </li> </ul>"},{"location":"developer/cursor-rules/#github-pages-wiki-system","title":"\ud83d\udcda GitHub Pages Wiki System","text":""},{"location":"developer/cursor-rules/#complete-setup-maintenance","title":"Complete Setup &amp; Maintenance","text":"<ul> <li>Main Guide: <code>GITHUB_PAGES_COMPLETE_SETUP.md</code> - Comprehensive setup and maintenance guide</li> <li>Status: Currently returning 404 - GitHub Pages needs manual configuration</li> <li>Live URL: https://wiki.orbgame.us (after configuration)</li> <li>DNS: Configured (wiki.orbgame.us \u2192 zimaxnet.github.io)</li> <li>Content: 3.4MB of documentation ready</li> </ul>"},{"location":"developer/cursor-rules/#core-setup-files","title":"Core Setup Files","text":"<ul> <li>Complete Setup Guide: <code>GITHUB_PAGES_COMPLETE_SETUP.md</code> - All setup information in one place</li> <li>Status Verification: <code>scripts/verify-wiki-status.sh</code> - Comprehensive status checking</li> <li>Quick Updates: <code>scripts/quick-wiki-update.sh</code> - Manual wiki updates</li> <li>README Sync: <code>scripts/sync-readme-to-wiki.sh</code> - Sync README/.cursorrules to wiki</li> <li>Configuration Guide: <code>scripts/configure-github-pages-step-by-step.sh</code> - Step-by-step setup</li> </ul>"},{"location":"developer/cursor-rules/#github-pages-configuration-required","title":"GitHub Pages Configuration Required","text":"<p>Go to: https://github.com/zimaxnet/orb-game/settings/pages Configure: - Source: Deploy from a branch - Branch: <code>gh-pages</code> - Folder: <code>/ (root)</code> - Custom domain: <code>wiki.orbgame.us</code> - Enforce HTTPS: \u2713</p>"},{"location":"developer/cursor-rules/#update-process-after-configuration","title":"Update Process (After Configuration)","text":"<p>Automatic Updates: 1. Edit files in <code>docs/</code> directory 2. Commit and push to main branch 3. GitHub Actions automatically builds and deploys 4. Wiki updates within 5-10 minutes</p> <p>Manual Updates: <pre><code># Quick wiki update\n./scripts/quick-wiki-update.sh\n\n# Sync from README/.cursorrules\n./scripts/sync-readme-to-wiki.sh\n</code></pre></p> <p>Sync README/.cursorrules to Wiki: <pre><code># Extract important content from README and .cursorrules\n./scripts/sync-readme-to-wiki.sh\n\n# Creates:\n# - docs/getting-started/project-overview.md\n# - docs/developer/deployment-patterns.md\n# - docs/developer/development-guidelines.md\n# - docs/developer/critical-notes.md\n# - docs/developer/cursor-rules.md\n</code></pre></p>"},{"location":"developer/cursor-rules/#monitoring-maintenance","title":"Monitoring &amp; Maintenance","text":"<p>Regular Checks: <pre><code># Test wiki accessibility\ncurl -I https://wiki.orbgame.us\n\n# Check deployment status\ngit log --oneline gh-pages -3\n\n# Run comprehensive verification\n./scripts/verify-wiki-status.sh\n</code></pre></p> <p>Update Workflow: 1. Update README.md with new features/bug fixes 2. Update .cursorrules with new development rules 3. Run sync script: <code>./scripts/sync-readme-to-wiki.sh</code> 4. Commit and push to trigger auto-deployment 5. Verify updates at https://wiki.orbgame.us</p>"},{"location":"developer/cursor-rules/#troubleshooting","title":"Troubleshooting","text":"<p>If GitHub Pages Shows 404: 1. Check GitHub Pages is configured correctly 2. Verify gh-pages branch exists and has content 3. Wait 5-10 minutes for processing 4. Check GitHub Actions for build errors</p> <p>If Updates Don't Work: 1. Ensure GitHub Pages is configured 2. Check GitHub Actions workflow is running 3. Verify changes are in <code>docs/</code> directory 4. Wait for deployment completion</p> <p>If DNS Issues: 1. Verify Azure DNS CNAME record exists 2. Wait for DNS propagation (up to 48 hours) 3. Check custom domain in GitHub Pages settings</p>"},{"location":"developer/cursor-rules/#success-checklist","title":"Success Checklist","text":"<ul> <li> GitHub Pages configured in repository settings</li> <li> Custom domain <code>wiki.orbgame.us</code> added</li> <li> \"Enforce HTTPS\" enabled</li> <li> gh-pages branch exists with content</li> <li> GitHub Actions workflow is running</li> <li> Site accessible at http://wiki.orbgame.us</li> <li> Site accessible at https://wiki.orbgame.us (after SSL)</li> <li> Documentation loads correctly</li> <li> Navigation and search work</li> <li> Automatic updates working</li> </ul>"},{"location":"developer/cursor-rules/#quick-links","title":"Quick Links","text":"<ul> <li>GitHub Pages Settings: https://github.com/zimaxnet/orb-game/settings/pages</li> <li>GitHub Actions: https://github.com/zimaxnet/orb-game/actions</li> <li>Live Wiki: https://wiki.orbgame.us</li> <li>Repository: https://github.com/zimaxnet/orb-game</li> </ul>"},{"location":"gameplay/image-display-system/","title":"\ud83d\uddbc\ufe0f Image Display System","text":"<p>The Orb Game features a revolutionary image display system that provides rich visual experiences while maintaining clean, accessible content when images are not available.</p>"},{"location":"gameplay/image-display-system/#overview","title":"\ud83c\udfaf Overview","text":"<p>The image display system is designed to enhance the learning experience by providing visual context for historical figures while ensuring that the core educational content remains accessible regardless of image availability.</p>"},{"location":"gameplay/image-display-system/#key-features","title":"\u2728 Key Features","text":""},{"location":"gameplay/image-display-system/#clean-image-display","title":"Clean Image Display","text":"<ul> <li>Images When Available: Rich visual galleries with historical portraits, achievements, inventions, and artifacts</li> <li>Clean Text When No Images: Story content displays directly without placeholder elements or clutter</li> <li>Proper Fallback Logic: Handles both array format (new) and object format (old) image structures</li> <li>Error Handling: Graceful fallback to text display if images fail to load</li> </ul>"},{"location":"gameplay/image-display-system/#responsive-design","title":"Responsive Design","text":"<ul> <li>Device Scaling: Images scale properly on all device sizes (desktop, tablet, mobile)</li> <li>Loading States: Clear indicators for image loading and error states</li> <li>Gallery Navigation: Smooth transitions between multiple images per historical figure</li> <li>Asynchronous Loading: Images populate in background while stories load instantly</li> </ul>"},{"location":"gameplay/image-display-system/#source-attribution","title":"Source Attribution","text":"<ul> <li>Licensing Information: Display of image sources and licensing details</li> <li>Permalinks: Persistent links to source images with proper attribution</li> <li>Quality Control: Licensing compliance and historical accuracy verification</li> <li>World-Class Sources: Integration with major repositories (Wikimedia Commons, Library of Congress, Internet Archive, Metropolitan Museum, Smithsonian Collections)</li> </ul>"},{"location":"gameplay/image-display-system/#technical-implementation","title":"\ud83c\udfd7\ufe0f Technical Implementation","text":""},{"location":"gameplay/image-display-system/#image-data-structure","title":"Image Data Structure","text":"<p>The system handles two image data formats:</p>"},{"location":"gameplay/image-display-system/#new-format-array","title":"New Format (Array)","text":"<pre><code>{\n  \"images\": [\n    {\n      \"url\": \"data:image/svg+xml;base64,...\",\n      \"source\": \"Primary\",\n      \"reliability\": \"High\",\n      \"priority\": 100,\n      \"createdAt\": \"2025-01-02T20:42:54.543Z\"\n    }\n  ]\n}\n</code></pre>"},{"location":"gameplay/image-display-system/#old-format-object","title":"Old Format (Object)","text":"<pre><code>{\n  \"images\": {\n    \"portrait\": { \"url\": \"...\" },\n    \"gallery\": [ ... ]\n  }\n}\n</code></pre>"},{"location":"gameplay/image-display-system/#component-architecture","title":"Component Architecture","text":"<ul> <li>HistoricalFigureDisplay.jsx: Main component handling image display logic</li> <li>Image Processing: Automatic format detection and conversion</li> <li>Error Handling: Comprehensive fallback mechanisms</li> <li>State Management: Loading, error, and success states</li> </ul>"},{"location":"gameplay/image-display-system/#css-styling","title":"CSS Styling","text":"<ul> <li>Responsive Images: Proper scaling and aspect ratio maintenance</li> <li>Loading Indicators: Visual feedback during image loading</li> <li>Error States: Clear indication when images fail to load</li> <li>Gallery Controls: Navigation buttons and transitions</li> </ul>"},{"location":"gameplay/image-display-system/#user-experience","title":"\ud83c\udfae User Experience","text":""},{"location":"gameplay/image-display-system/#image-loading-flow","title":"Image Loading Flow","text":"<ol> <li>Story Loads Instantly: Text content appears immediately</li> <li>Background Image Loading: Images populate asynchronously</li> <li>Visual Feedback: Loading indicators show progress</li> <li>Gallery Navigation: Users can browse multiple images per figure</li> <li>Error Handling: Graceful fallback if images fail</li> </ol>"},{"location":"gameplay/image-display-system/#gallery-features","title":"Gallery Features","text":"<ul> <li>Multiple Images Per Figure: Portraits, achievements, inventions, artifacts</li> <li>Smooth Transitions: CSS animations between images</li> <li>Navigation Controls: Previous/next buttons with proper state management</li> <li>Image Counter: \"Image 2 of 5\" display</li> <li>Source Information: Licensing and attribution details</li> </ul>"},{"location":"gameplay/image-display-system/#accessibility","title":"Accessibility","text":"<ul> <li>Alt Text: Descriptive text for screen readers</li> <li>Keyboard Navigation: Arrow keys for gallery navigation</li> <li>Focus Management: Proper focus indicators for interactive elements</li> <li>Loading States: Clear status indicators for all users</li> </ul>"},{"location":"gameplay/image-display-system/#performance-optimization","title":"\ud83d\udcca Performance Optimization","text":""},{"location":"gameplay/image-display-system/#asynchronous-loading","title":"Asynchronous Loading","text":"<ul> <li>Non-Blocking: Images don't prevent story text from loading</li> <li>Progressive Enhancement: Core content works without images</li> <li>Background Processing: Image loading happens in parallel</li> <li>Caching: Images are cached for faster subsequent loads</li> </ul>"},{"location":"gameplay/image-display-system/#error-handling","title":"Error Handling","text":"<ul> <li>Network Failures: Graceful handling of connection issues</li> <li>Invalid Images: Fallback for corrupted or invalid image data</li> <li>Missing Images: Clean text display when no images available</li> <li>Timeout Handling: Automatic fallback after reasonable timeout</li> </ul>"},{"location":"gameplay/image-display-system/#memory-management","title":"Memory Management","text":"<ul> <li>Image Cleanup: Proper disposal of loaded images</li> <li>State Reset: Clean state management between stories</li> <li>Resource Optimization: Efficient image loading and display</li> </ul>"},{"location":"gameplay/image-display-system/#development-guidelines","title":"\ud83d\udd27 Development Guidelines","text":""},{"location":"gameplay/image-display-system/#adding-new-images","title":"Adding New Images","text":"<ol> <li>Format Compliance: Ensure images follow the correct data structure</li> <li>Quality Standards: Verify licensing and historical accuracy</li> <li>Performance Testing: Test loading times and memory usage</li> <li>Accessibility: Add proper alt text and descriptions</li> </ol>"},{"location":"gameplay/image-display-system/#testing-image-display","title":"Testing Image Display","text":"<pre><code>// Test with images\nconst storyWithImages = {\n  historicalFigure: \"Archimedes\",\n  images: [{ url: \"data:image/svg+xml;base64,...\", source: \"Primary\" }]\n};\n\n// Test without images\nconst storyWithoutImages = {\n  historicalFigure: \"Archimedes\",\n  images: []\n};\n</code></pre>"},{"location":"gameplay/image-display-system/#error-scenarios","title":"Error Scenarios","text":"<ul> <li>Empty Images Array: Should show clean text</li> <li>Invalid Image URLs: Should fallback gracefully</li> <li>Network Timeouts: Should show error state</li> <li>Missing Image Data: Should handle gracefully</li> </ul>"},{"location":"gameplay/image-display-system/#success-metrics","title":"\ud83d\udcc8 Success Metrics","text":""},{"location":"gameplay/image-display-system/#image-coverage","title":"Image Coverage","text":"<ul> <li>120 Historical Figures: Complete coverage across all categories</li> <li>1,083 Total Images: Rich visual galleries for every figure</li> <li>100% Success Rate: Images available for all major categories and epochs</li> <li>9.0 Images Per Figure: Average across all categories and epochs</li> </ul>"},{"location":"gameplay/image-display-system/#image-types","title":"Image Types","text":"<ul> <li>361 Portraits: Historical figure portraits and depictions</li> <li>361 Achievements: Visual representations of accomplishments</li> <li>241 Inventions: Diagrams and illustrations of innovations</li> <li>120 Artifacts: Historical objects and artifacts</li> </ul>"},{"location":"gameplay/image-display-system/#source-distribution","title":"Source Distribution","text":"<ul> <li>Wikimedia Commons: 603 images (55.7%)</li> <li>Library of Congress: 120 images (11.1%)</li> <li>Internet Archive: 120 images (11.1%)</li> <li>Metropolitan Museum: 120 images (11.1%)</li> <li>Smithsonian Collections: 120 images (11.1%)</li> </ul>"},{"location":"gameplay/image-display-system/#troubleshooting","title":"\ud83d\udea8 Troubleshooting","text":""},{"location":"gameplay/image-display-system/#common-issues","title":"Common Issues","text":"<ul> <li>Images Not Loading: Check network connectivity and image URLs</li> <li>Gallery Navigation Issues: Verify state management and event handlers</li> <li>Performance Problems: Monitor memory usage and image sizes</li> <li>Accessibility Issues: Ensure proper alt text and keyboard navigation</li> </ul>"},{"location":"gameplay/image-display-system/#debug-commands","title":"Debug Commands","text":"<pre><code># Test image API\ncurl \"https://api.orbgame.us/api/orb/images/stats\"\n\n# Check image service\ncurl \"https://api.orbgame.us/api/orb/images/figures/Archimedes\"\n\n# Verify image loading\ncurl \"https://api.orbgame.us/api/orb/historical-figures/Technology?count=1&amp;includeImages=true\"\n</code></pre>"},{"location":"gameplay/image-display-system/#best-practices","title":"\ud83c\udfaf Best Practices","text":""},{"location":"gameplay/image-display-system/#image-quality","title":"Image Quality","text":"<ul> <li>High Resolution: Use appropriate image sizes for different devices</li> <li>Historical Accuracy: Ensure images are historically appropriate</li> <li>Licensing Compliance: Verify all images have proper licensing</li> <li>File Optimization: Compress images for faster loading</li> </ul>"},{"location":"gameplay/image-display-system/#user-experience_1","title":"User Experience","text":"<ul> <li>Progressive Loading: Show content immediately, enhance with images</li> <li>Clear Feedback: Provide loading and error states</li> <li>Smooth Transitions: Use CSS animations for gallery navigation</li> <li>Accessibility: Ensure all users can access content</li> </ul>"},{"location":"gameplay/image-display-system/#performance","title":"Performance","text":"<ul> <li>Lazy Loading: Load images only when needed</li> <li>Caching: Implement proper image caching strategies</li> <li>Compression: Optimize image file sizes</li> <li>CDN Usage: Use content delivery networks for faster loading</li> </ul> <p>The image display system ensures that the Orb Game provides a rich, educational experience with beautiful visuals while maintaining accessibility and performance for all users. </p>"},{"location":"getting-started/introduction/","title":"\ud83c\udfae Introduction to Orb Game","text":""},{"location":"getting-started/introduction/#what-is-orb-game","title":"What is Orb Game?","text":"<p>Orb Game is an advanced AI-powered interactive gaming platform that combines time travel, positive news discovery, and multimodal AI technology. Players explore different historical epochs through an immersive 3D environment, discovering stories about influential historical figures and their achievements.</p>"},{"location":"getting-started/introduction/#key-features","title":"\ud83c\udf1f Key Features","text":""},{"location":"getting-started/introduction/#interactive-3d-experience","title":"\ud83c\udfaf Interactive 3D Experience","text":"<ul> <li>Milky Way Background: 5,000 animated stars create an immersive space environment</li> <li>Orbiting Satellites: 8 categories represented as interactive 3D orbs</li> <li>Drag &amp; Drop: Intuitive controls for exploring different time periods</li> <li>Responsive Design: Works seamlessly on desktop and mobile devices</li> </ul>"},{"location":"getting-started/introduction/#time-travel-through-history","title":"\ud83d\udd70\ufe0f Time Travel Through History","text":"<ul> <li>5 Historical Epochs: Ancient, Medieval, Industrial, Modern, Future</li> <li>8 Categories: Technology, Science, Art, Nature, Sports, Music, Space, Innovation</li> <li>240+ Stories: Pre-populated historical figure narratives</li> <li>Bilingual Support: English and Spanish with cultural sensitivity</li> </ul>"},{"location":"getting-started/introduction/#ai-powered-content","title":"\ud83e\udd16 AI-Powered Content","text":"<ul> <li>O4-Mini Model: Advanced AI for story generation</li> <li>Text-to-Speech: Immersive audio narration</li> <li>Dynamic Content: Real-time story generation and caching</li> <li>Historical Accuracy: Carefully researched historical figures</li> </ul>"},{"location":"getting-started/introduction/#visual-excellence","title":"\ud83c\udfa8 Visual Excellence","text":"<ul> <li>Three.js Graphics: High-performance 3D rendering</li> <li>Smooth Animations: Fluid transitions and interactions</li> <li>Modern UI: Clean, intuitive interface design</li> <li>Accessibility: Audio controls and keyboard navigation</li> </ul>"},{"location":"getting-started/introduction/#technical-architecture","title":"\ud83c\udfd7\ufe0f Technical Architecture","text":""},{"location":"getting-started/introduction/#frontend-stack","title":"Frontend Stack","text":"<ul> <li>React 19.x with modern hooks and context</li> <li>Vite for fast development and optimized builds</li> <li>Three.js with @react-three/fiber for 3D graphics</li> <li>CSS Modules for component-specific styling</li> </ul>"},{"location":"getting-started/introduction/#backend-stack","title":"Backend Stack","text":"<ul> <li>Node.js with Express server</li> <li>Azure OpenAI integration (o4-mini model)</li> <li>Azure Cosmos DB for MongoDB storage</li> <li>Azure Key Vault for secure credential management</li> </ul>"},{"location":"getting-started/introduction/#deployment-infrastructure","title":"Deployment Infrastructure","text":"<ul> <li>Azure Web App for frontend hosting</li> <li>Azure Container Apps for backend services</li> <li>Azure Container Registry for Docker images</li> <li>GitHub Actions for automated CI/CD</li> </ul>"},{"location":"getting-started/introduction/#how-it-works","title":"\ud83c\udfae How It Works","text":""},{"location":"getting-started/introduction/#1-orb-interaction","title":"1. Orb Interaction","text":"<p>Players drag orbs (representing different categories) to the center of the screen to activate story discovery.</p>"},{"location":"getting-started/introduction/#2-epoch-selection","title":"2. Epoch Selection","text":"<p>Choose from 5 historical periods to explore different eras of human achievement.</p>"},{"location":"getting-started/introduction/#3-story-generation","title":"3. Story Generation","text":"<p>AI generates engaging narratives about historical figures and their accomplishments.</p>"},{"location":"getting-started/introduction/#4-audio-experience","title":"4. Audio Experience","text":"<p>Text-to-speech provides immersive narration in both English and Spanish.</p>"},{"location":"getting-started/introduction/#5-content-caching","title":"5. Content Caching","text":"<p>Stories are cached for instant loading and optimal performance.</p>"},{"location":"getting-started/introduction/#current-status","title":"\ud83d\udcca Current Status","text":"<ul> <li>\u2705 Live Game: https://orbgame.us</li> <li>\u2705 API Endpoint: https://api.orbgame.us</li> <li>\u2705 240+ Stories: Historical figures across all categories and epochs</li> <li>\u2705 Bilingual Support: English and Spanish content</li> <li>\u2705 Automated Deployment: CI/CD pipeline with GitHub Actions</li> <li>\u2705 Performance Optimized: 88.2% faster response times with caching</li> </ul>"},{"location":"getting-started/introduction/#getting-started","title":"\ud83d\ude80 Getting Started","text":""},{"location":"getting-started/introduction/#for-players","title":"For Players","text":"<ol> <li>Visit https://orbgame.us</li> <li>Explore different categories by dragging orbs to the center</li> <li>Select historical epochs to travel through time</li> <li>Enjoy immersive stories with audio narration</li> </ol>"},{"location":"getting-started/introduction/#for-developers","title":"For Developers","text":"<ol> <li>Clone the repository: <code>git clone https://github.com/zimaxnet/orb-game</code></li> <li>Install dependencies: <code>npm install</code></li> <li>Start development server: <code>npm run dev</code></li> <li>Read the Developer Documentation</li> </ol>"},{"location":"getting-started/introduction/#for-contributors","title":"For Contributors","text":"<ol> <li>Fork the repository</li> <li>Create a feature branch</li> <li>Make your changes</li> <li>Submit a pull request</li> <li>See Contributing Guidelines</li> </ol>"},{"location":"getting-started/introduction/#mission","title":"\ud83c\udfaf Mission","text":"<p>Orb Game aims to make history engaging and accessible through cutting-edge AI technology. By combining interactive 3D graphics, advanced AI storytelling, and carefully researched historical content, we create an educational experience that inspires curiosity and learning.</p>"},{"location":"getting-started/introduction/#vision","title":"\ud83c\udf1f Vision","text":"<p>To become the premier platform for AI-powered historical education, connecting people with the remarkable achievements of humanity's greatest minds across all eras and disciplines.</p> <p>Ready to explore? Start playing now! </p>"},{"location":"getting-started/quick-start/","title":"Quick Start Guide","text":""},{"location":"getting-started/quick-start/#getting-started-with-orb-game","title":"\ud83d\ude80 Getting Started with Orb Game","text":""},{"location":"getting-started/quick-start/#for-players","title":"For Players","text":"<ol> <li>Visit https://orbgame.us</li> <li>Drag orbs to the center to explore categories</li> <li>Select historical epochs to travel through time</li> <li>Enjoy immersive stories with audio narration</li> </ol>"},{"location":"getting-started/quick-start/#for-developers","title":"For Developers","text":"<ol> <li>Clone the repository</li> <li>Install dependencies: <code>npm install</code></li> <li>Start development: <code>npm run dev</code></li> <li>Read the Architecture Guide</li> </ol> <p>More detailed guides coming soon...</p>"},{"location":"getting-started/readme-sync/","title":"README Sync","text":"<p>This page contains content automatically synced from the main README.md file.</p>"},{"location":"getting-started/readme-sync/#last-sync","title":"Last Sync","text":"<p>Last sync: Sat Aug  2 19:05:37 MST 2025</p>"},{"location":"getting-started/readme-sync/#synced-sections","title":"Synced Sections","text":"<ul> <li>Project Overview \u2192 Project Overview</li> <li>Deployment Patterns \u2192 Deployment Patterns</li> <li>Development Guidelines \u2192 Development Guidelines</li> <li>Critical Notes \u2192 Critical Notes</li> <li>Cursor Rules \u2192 Cursor Rules</li> </ul>"}]}